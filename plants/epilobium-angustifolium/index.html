<!DOCTYPE html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
<script>
function setup() {
  randomSeed(51)
  
  createCanvas(450, 800);
  
  let croneCenterX = (width / 2)
  let croneCenterY = (height / 4 + 30)
  let stvolWidth = 50
  
  // Ствол
  background("white");
  
  fill("#804000");
  beginShape();
  
  fill("#804000");
  rect(width / 2 - stvolWidth / 2, croneCenterY, stvolWidth, 3 * height / 4)

  // Add vertices.
  vertex(width / 2 - stvolWidth, height);
  vertex(width / 2 - stvolWidth / 2, height - height /4 );
  vertex(width / 2 + stvolWidth / 2, height - height / 4);
  vertex(width / 2 + stvolWidth, height);

  // Stop drawing the shape.
  endShape(CLOSE);

  // Крона
  
  fill(0 , 200, 0);
  strokeWeight(20);
  stroke("#1FC70C50");

  
  circle(croneCenterX, croneCenterY, 400);
  
  
  for (let i = 0; i < 200; i++) { // выведет 0, затем 1, затем 2
    plotLeaf(croneCenterX, croneCenterY)
  }
  
  // Яблоки
  for (let i = 0; i < 35; i++) {
    plotApple(croneCenterX, croneCenterY)
  }

}

function plotLeaf(croneCenterX, croneCenterY) {
  fill(0 , 128 + (random(60) - 30), 0);
    
  noStroke()
  let angle = radians(random(360)); // convert to radians
  let radius = random(30, 200); // random radius between 150 and 250
  let x = croneCenterX + cos(angle) * radius;
  let y = croneCenterY + sin(angle) * radius;

  circle(x, y, random(20,50));  
}

function plotApple(croneCenterX, croneCenterY) {
  noStroke()

  let angle = radians(random(360)); // convert to radians
  let radius = random(30, 200); // random radius between 150 and 250
  let x = croneCenterX + cos(angle) * radius;
  let y = croneCenterY + sin(angle) * radius;

  stroke('#913636')
  strokeWeight(5);
  line(x, y, x-5, y - 20); // Shorter length for the stem

  noStroke()
  fill('red');
  circle(x, y, 30);
}

function draw() {

}
</script>
